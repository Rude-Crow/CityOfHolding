<IndexTab@Button>:
    size_hint: None, None
    size: 100, 40
    background_normal: ''
    background_color: 0.85, 0.75, 0.5, 1
    color: 0.1, 0.05, 0, 1
    font_size: 16
    bold: True
    canvas.before:
        Color:
            rgba: 0.85, 0.75, 0.5, 1
        RoundedRectangle:
            pos: self.x - 15, self.y
            size: self.width + 15, self.height
            radius: [5, 5, 5, 5]

<IndexSideBar@BoxLayout>:
    orientation: 'vertical'
    size_hint: None, 1
    width: 100
    padding: 10, 20
    spacing: 10
    canvas.before:
        Color:
            rgba: 0.96, 0.94, 0.84, 1  # parchment color
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [0, 10, 10, 0]

<BookPage@BoxLayout>:
    orientation: 'vertical'
    padding: 20
    spacing: 10
    canvas.before:
        # Stronger, wider shadow on right edge ONLY if right_side is True
        Color:
            rgba: (0, 0, 0, 0.30) if self.right_side else (0, 0, 0, 0)
        RoundedRectangle:
            pos: (self.right - 15) if self.right_side else 0, self.y if self.right_side else 0
            size: (20, self.height) if self.right_side else (0, 0)
            radius: [0, 20, 20, 0] if self.right_side else [20, 0, 0, 20]

        # Page parchment background
        Color:
            rgba: 0.96, 0.94, 0.84, 1
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [0, 20, 20, 0] if self.right_side else [20, 0, 0, 20]

    right_side: False

<RightPageContainer@RelativeLayout>:
    size_hint_x: 0.55

    IndexSideBar:
        id: tabs_sidebar
        size_hint: None, 1
        width: 150
        pos_hint: {'right': 1, 'y': 0}

    BookPage:
        id: right_page
        right_side: True
        size_hint: None, 1
        width: (root.width - tabs_sidebar.width) + 10

<OpenBookLayout@BoxLayout>:
    orientation: 'horizontal'
    spacing: 5
    padding: 20

    BookPage:
        id: left_page
        right_side: False
        size_hint_x: 0.45
        Label:
            markup: True
            font_size: 24
            color: 0.2, 0.1, 0
            halign: 'center'
            valign: 'middle'
            text_size: self.size

    RightPageContainer:
        id: right_container